title: 关于PHP中带减号的变量的处理方法
date: 2016-02-14 08:28:00
categories: 技术研究
tags: [PHP]
---
[KK-Player 28726581]<br />
[00:07.020]Tough girl <br />
[00:08.350] <br />
[00:10.120]In the fast lane <br />
[00:11.980] <br />
[00:13.030]No time for love <br />
[00:15.290] <br />
[00:15.890]No time for hate <br />
[00:18.320] <br />
[00:18.880]No drama, no time <br />
[00:22.800]For games <br />
[00:24.880]Tough girl <br />
[00:26.200] <br />
[00:28.070]Whose soul aches <br />
[00:29.420]I'm at home <br />
[00:30.690]On my own <br />
[00:31.930]Check my phone <br />
[00:33.270]Nothing, though <br />
[00:34.850]Act busy <br />
[00:35.830] <br />
[00:36.370]Order in <br />
[00:37.820]Pay TV <br />
[00:39.220]It's agony <br />
[00:40.100] <br />
[00:42.280]I may cry, ruining my makeup <br />
[00:46.780] <br />
[00:48.170]Wash away all the things <br />
[00:51.200]you've taken <br />
[00:52.700] <br />
[00:54.190]I don't care if I don't look pretty <br />
[00:58.340] <br />
[01:00.020]Big girls cry <br />
[01:01.420]when their hearts are breaking <br />
[01:04.230] <br />
[01:05.910]Big girls cry <br />
[01:07.430]when their hearts are breaking <br />
[01:10.740] <br />
[01:11.850]Big girls cry <br />
[01:13.380]when their heart is breaking <br />
[01:17.020] <br />
[01:18.100]Tough girl <br />
[01:19.600] <br />
[01:20.990]I'm in pain <br />
[01:22.830] <br />
[01:23.880]It's lonely at the top <br />
[01:25.580] <br />
[01:26.300]Blackouts and airplanes <br />
[01:29.620]I still pour you a glass of champagne <br />
[01:34.750] <br />
[01:35.340]I'm a tough girl <br />
[01:38.130] <br />
[01:39.320]Whose soul aches <br />
[01:40.520]I'm at home <br />
[01:41.550]On my own <br />
[01:42.960]Check my phone <br />
[01:44.440]Nothing, though <br />
[01:45.980]Act busy <br />
[01:46.950] <br />
[01:47.490]Order in <br />
[01:48.940]Pay TV <br />
[01:49.790] <br />
[01:50.330]It's agony <br />
[01:51.140] <br />
[01:53.330]I may cry, <br />
[01:54.840]ruining my makeup <br />
[01:57.890] <br />
[01:59.250]Wash away all the things <br />
[02:02.200]you've taken <br />
[02:04.060] <br />
[02:05.060]I don't care <br />
[02:06.680]if I don't look pretty <br />
[02:09.850] <br />
[02:11.100]Big girls cry <br />
[02:12.630]when their hearts are breaking <br />
[02:15.910] <br />
[02:17.000]Big girls cry <br />
[02:18.550]when their hearts are breaking <br />
[02:21.900] <br />
[02:22.910]Big girls cry <br />
[02:24.510]when their heart are breaking <br />
[02:27.620] <br />
[02:29.180]away i go<br />
[02:31.430] <br />
[02:32.120]away i go<br />
[02:34.360] <br />
[02:35.040]away i go<br />
[02:37.920]away i go<br />
[02:40.130] <br />
[02:40.880]away i go<br />
[02:43.240] <br />
[02:43.880]away i go<br />
[02:46.280] <br />
[02:46.950]away i go alone<br />
[02:51.160] <br />
[02:52.630]I may cry, ruining my makeup <br />
[02:56.830] <br />
[02:58.390]Wash away all the things <br />
[03:01.540]you've taken <br />
[03:03.000] <br />
[03:04.300]I don't care if I don't look pretty <br />
[03:09.620] <br />
[03:10.380]Big girls cry <br />
[03:11.940]when their hearts are breaking <br />
[03:15.130] <br />
[03:16.260]Big girls cry <br />
[03:17.890]when their hearts are breaking <br />
[03:21.330] <br />
[03:22.270]Big girls cry <br />
[03:23.710]when their heart is breaking <br />
[03:27.320]<br />
[/KK-Player]<br />
<br />
最近在研究Challonge的API<br />
在输出tournaments表的时候，看到了一个很奇怪的东西<br />
<pre class="brush:php; toolbar:false;">    $tournamentsList = $api_instance[$key]-&gt;getTournaments()-&gt;tournament;
    print_r($tournamentsList);</pre>
<br />
输出结果如下<br />
<pre class="brush:php; toolbar:false;">     SimpleXMLElement Object
(
    [id] =&gt; 2213854
    [name] =&gt; DFXRC first match
    [url] =&gt; DFXRC_first_match
    [description] =&gt; &lt;strong&gt;DFXRC&lt;/strong&gt; is strong!
    [tournament-type] =&gt; single elimination
    [started-at] =&gt; 2016-02-04T00:05:26-08:00
    [completed-at] =&gt; SimpleXMLElement Object
        (
            [@attributes] =&gt; Array
                (
                    [type] =&gt; dateTime
                    [nil] =&gt; true
                )

        )
.....</pre>
<br />
看到那个started-at了没？没错！你没看错，变量名里面居然有减号！！！<!--more--><br />
按照PHP变量名的命名规范来说，这种变量名简直就是犯规啊！这要怎么访问？？<br />
按照常理来说，应该用<br />
<pre class="brush:php; toolbar:false;">echo $tournamentsList-&gt;started-at</pre>
<br />
这样直接访问的，可是很明显，减号会被识别成运算符<br />
这样语义就变成了变量start减变量at了<br />
不出所料，打开页面返回HTTP 500= =<br />
想了想，加引号试试<br />
<pre class="brush:php; toolbar:false;">echo $tournamentsList-&gt;"started-at"</pre>
<br />
结果还是不行，直接语法错误<br />
真是逼死人，直接再定义一个变量！<br />
<pre class="brush:php; toolbar:false;">  $word="started-at";
  echo $tournamentsList-&gt;$word;</pre>
<br />
这样居然成功了！！天哪，访问个变量居然要定义两个变量，怎么这么麻烦！<br />
正准备去给他们报个issue，结果看到前面已经有人提出来了<br />
他们官方给出的访问方法居然是这样的．．．<br />
<pre class="brush:php; toolbar:false;">echo (string)$tournament-&gt;{'tournament-type'};</pre>
<br />
真是长见识了，加花括号再加引号的访问变量= =，厉害厉害，佩服啊!