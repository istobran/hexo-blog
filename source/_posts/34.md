title: 【手记】让linuxmint 17.1下的gedit支持中文编码  
date: 2015-04-12 11:01:00
categories: 日常运维
urlname: make-gedit-support-chinese-encoding-on-linuxmint
tags: [Shell,Linux基础,操作系统]
---
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 看着linuxmint不错，就马上装了个来玩，作为一个刚加入ubuntu阵营的新手，一路上碰到好多问题。</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;">首先就是这个gedit中文编码的问题，之前在windows下用notepad写了好多txt文件，结果发现在mint下打开之后中文全是乱码。</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 查了下，在17.1 cinnamon里面默认自带的gedit版本是2.30</span><br />
<pre class="prettyprint"><span class="pln">$ gedit </span><span class="pun" style="color:#666600;">--</span><span class="pln">version</span></pre>
<pre class="prettyprint"><span class="pln">gedit </span><span class="pun" style="color:#666600;">-</span><span class="pln"> </span><span class="typ" style="color:#660066;">Version</span><span class="pln"> </span><span class="lit" style="color:#006666;">2.30</span><span class="pun" style="color:#666600;">.</span><span class="lit" style="color:#006666;">4</span> </pre>
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 于是在网上找，找了下对应版本的解决办法。总结出大概有三种方法。</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;">一、直接指定编码打开文件</span><br />
<!--more-->
<pre class="prettyprint"><span class="pln">$&nbsp;gedit&nbsp;linux</span><span class="pun" style="color:#666600;">.</span><span class="pln">txt&nbsp;</span><span class="pun" style="color:#666600;">--</span><span class="pln">encoding</span><span class="pun" style="color:#666600;">=</span><span class="pln">gbk</span> </pre>
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;">二、在终端直接设置</span> 
<pre class="prettyprint"><span class="pln">gconftool</span><span class="pun" style="color:#666600;">-</span><span class="lit" style="color:#006666;">2</span><span class="pln"> </span><span class="pun" style="color:#666600;">--</span><span class="kwd" style="color:#000088;">set</span><span class="pln"> </span><span class="pun" style="color:#666600;">--</span><span class="pln">type</span><span class="pun" style="color:#666600;">=</span><span class="pln">list </span><span class="pun" style="color:#666600;">--</span><span class="pln">list</span><span class="pun" style="color:#666600;">-</span><span class="pln">type</span><span class="pun" style="color:#666600;">=</span><span class="kwd" style="color:#000088;">string</span><span class="pln"> </span><span class="pun" style="color:#666600;">/</span><span class="pln">apps</span><span class="pun" style="color:#666600;">/</span><span class="pln">gedit</span><span class="pun" style="color:#666600;">-</span><span class="lit" style="color:#006666;">2</span><span class="pun" style="color:#666600;">/</span><span class="pln">preferences</span><span class="pun" style="color:#666600;">/</span><span class="pln">encodings</span><span class="pun" style="color:#666600;">/</span><span class="pln">auto_detected </span><span class="str" style="color:#008800;">"</span><span style="color:#008800;font-family:'sans serif', tahoma, verdana, helvetica;line-height:1.5;">[GB2312,UTF-8,CURRENT,ISO-8859-15,UTF-16]"</span> </pre>
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;">三、使用GUI工具gconf-editor</span><br />
<pre class="prettyprint"><span class="pun" style="color:#666600;">１、安装</span><span class="pln">gconf</span><span class="pun" style="color:#666600;">-</span><span class="pln">editor</span><span class="pun" style="color:#666600;">（</span><span class="pln">apt</span><span class="pun" style="color:#666600;">-</span><span class="kwd" style="color:#000088;">get</span><span class="pln"> install gconf</span><span class="pun" style="color:#666600;">-</span><span class="pln">editor</span><span class="pun" style="color:#666600;">）</span> <span class="pun" style="color:#666600;">２、运行</span><span class="pln">gconf</span><span class="pun" style="color:#666600;">-</span><span class="pln">editor</span> <span class="pun" style="color:#666600;">３、展开/</span><span class="pln">apps</span><span class="pun" style="color:#666600;">/</span><span class="pln">gedit</span><span class="pun" style="color:#666600;">-</span><span class="lit" style="color:#006666;">2</span><span class="pun" style="color:#666600;">/</span><span class="pln">preferences</span><span class="pun" style="color:#666600;">/</span><span class="pln">encodings</span> <span class="pun" style="color:#666600;">４、在</span><span class="pln">auto_detected</span><span class="pun" style="color:#666600;">键中新增</span><span class="pln">GBK</span><span class="pun" style="color:#666600;">，并使它位于</span><span class="pln">UTF</span><span class="pun" style="color:#666600;">-</span><span class="lit" style="color:#006666;">8</span><span class="pun" style="color:#666600;">前面，点</span><span class="pln">OK</span><span class="pun" style="color:#666600;">。</span> </pre>
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;">我在实际操作的时候，发现居然只有第一条有效，第二种第三种都试过了，直接用文件管理器打开居然还是乱码。我就当时就纳闷了，想着都是ubuntu，应该不会有这种问题的吧。于是reboot了一遍。</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 重启完后再打开gconf-editor看了一下，我惊呆了，居然之前设置的东西都没了！</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 于是想了想，原来我之前在终端里面启动gconf的时候是用root启动的，重启完后没进root，只在普通用户下启动gconf-editor。想到这里，果断sudo su -进root，再开gconf-editor，一看，明白了！</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 原来是gedit中的配置文件还分用户存储，所以之前在root用户中配置的东西在普通用户下不起效果！</span><br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 这次我再把auto_detect中的值增加GBK然后放到前位，再用文件管理器调用gedit打开txt文件，这回正常了。。。</span><br />
<br />
<span style="font-family:'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;font-size:16px;line-height:28px;background-color:#FFFFFF;"> 呸，就在这个地方浪费了我半个小时来折腾。。。特此一记！</span>